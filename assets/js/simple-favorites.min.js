jQuery(function(t){function a(){t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavoritesnonce"},success:function(t){i(t.nonce)}})}function i(a){var i='<script type="text/javascript"> var simple_favorites_nonce = "'+a+'" ;</script>';t("head").append(i)}function e(){t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavorites_array"},success:function(a){var i=[];t.each(a.favorites,function(t,a){i[t]=a}),s(i)}})}function s(a){var i=t(".simplefavorite-button");t.each(i,function(i){for(var e=t(this).data("postid"),s=t(this).data("siteid"),i=0;i<a.length;i++)a[i].site_id===s&&(o(e,a[i].site_favorites)?t(this).addClass("active").html(simple_favorites.favorited):t(this).removeClass("active").html(simple_favorites.favorite))})}function o(a,i){var e=!1;return t.each(i,function(t,i){i===a&&(e=!0),parseInt(i)===a&&(e=!0)}),e}function n(){var a=t(".favorites-list");t.each(a,function(){t(this).data("userid"),t(this).data("siteid"),t(this).data("links"),t(this)})}function c(a){var i=t(a).data("postid"),e=t(a).data("siteid"),s="inactive";if(t(a).hasClass("active"))t(a).removeClass("active"),t(a).html(simple_favorites.favorite);else{var s="active";t(a).addClass("active"),t(a).html(simple_favorites.favorited)}t.ajax({url:simple_favorites.ajaxurl,type:"post",datatype:"json",data:{action:"simplefavorites",nonce:simple_favorites_nonce,postid:i,siteid:e,status:s},success:function(t){"success"!==t.status&&console.log(t.message),console.log(t)}})}t(document).ready(function(){a()}),t(document).ready(function(){e(),n()}),t(document).on("click",".simplefavorite-button",function(a){a.preventDefault();var i=t(this);c(i)})});